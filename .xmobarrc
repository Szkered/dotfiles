-- Dependencies:
   -- otf-font-awesome
   -- ttf-mononoki
   -- ttf-ubuntu-font-family
   -- htop
   -- emacs
   -- trayer

Config {

       -- appearance
       font            = "Ubuntu Bold 9"
       , additionalFonts = [ "Mononoki 11"
                           , "Font Awesome 6 Free Solid 12"
                           , "Font Awesome 6 Brands 12"
                           ]
       -- Color scheme: Ayu Dark
       , bgColor      = "#0d1017"
       , fgColor      = "#bfbdb6"

       -- Position TopSize and BottomSize take 3 arguments:
       --   an alignment parameter (L/R/C) for Left, Right or Center.
       --   an integer for the percentage width, so 100 would be 100%.
       --   an integer for the minimum pixel height for xmobar, so 24 would force a height of at least 24 pixels.
       --   NOTE: The height should be the same as the trayer (system tray) height.
       , position       = TopSize L 100 24

       -- general behavior
       , lowerOnStart =     False   -- send to bottom of window stack on start
       , hideOnStart =      False   -- start with window unmapped (hidden)
       , allDesktops =      True    -- show on all desktops
       , persistent =       True    -- enable/disable hiding (True = disabled)

       -- The root folder where icons are stored.
       , iconRoot     = ".xmonad/xpm/"  -- default: "."

       -- plugins
       --   Numbers can be automatically colored according to their value. xmobar
       --   decides color based on a three-tier/two-cutoff system, controlled by
       --   command options:
       --     --Low sets the low cutoff
       --     --High sets the high cutoff
       --
       --     --low sets the color below --Low cutoff
       --     --normal sets the color between --Low and --High cutoffs
       --     --High sets the color above --High cutoff
       --
       --   The --template option controls how the plugin is displayed. Text
       --   color can be set by enclosing in <fc></fc> tags. For more details
       --   see http://projects.haskell.org/xmobar/#system-monitor-plugins.
       , commands = [

                    -- network activity monitor (dynamic interface resolution)
                    Run DynNetwork     [ "--template" , "<fn=2>\xf6ff</fn> <dev>: <tx>kB/s|<rx>kB/s"
                                         , "--Low"      , "1000"       -- units: B/s
                                         , "--High"     , "5000"       -- units: B/s
                                         , "--low"      , "#91b362"
                                         , "--normal"   , "#f9af4f"
                                         , "--high"     , "#ea6c73"
                                         ] 10

                    -- Volume
                    , Run Com "echo"     ["<fn=2>\xf027</fn>"] "volume_icon" 3600
                    , Run Com "bash"     ["/home/zekun/dotfiles/get_volume.sh"] "volume" 1

                    -- Gpu usage
                    , Run Com "echo"     ["<fn=2>\xf2db</fn>"] "gpuicon" 3600
                    , Run Com "bash"     ["/home/zekun/dotfiles/gpustats.sh"] "gpuusage" 20

                    -- Cpu usage in percent
                    , Run MultiCpu       [ "--template" , "<fn=2>\xf2db</fn> cpu: <total0>%|<total1>%"
                                         , "--Low"      , "50"         -- units: %
                                         , "--High"     , "85"         -- units: %
                                         , "--low"      , "#91b362"
                                         , "--normal"   , "#f9af4f"
                                         , "--high"     , "#ea6c73"
                                         ] 20
                      
                    -- cpu core temperature monitor
                    , Run CoreTemp       [ "--template" , "<fn=2>\xf2c8</fn> core: <core0>째C|<core1>째C"
                                         , "--Low"      , "70"        -- units: 째C
                                         , "--High"     , "80"        -- units: 째C
                                         , "--low"      , "#91b362"
                                         , "--normal"   , "#f9af4f"
                                         , "--high"     , "#ea6c73"
                                         ] 50
                    
                    -- memory usage monitor
                    , Run Memory         ["--template"  , "<fn=2>\xf233</fn>  mem: <used>M (<usedratio>%)"
                                         , "--Low"      , "20"        -- units: %
                                         , "--High"     , "90"        -- units: %
                                         , "--low"      , "#91b362"
                                         , "--normal"   , "#f9af4f"
                                         , "--high"     , "#ea6c73"
                                         ] 20
                      
                    -- Disk space free
                    , Run DiskU          [("/", "<fn=2>\xf0c7</fn>  hdd: <free> free")
                                         ] [] 60
                      
                    -- Battery
                    , Run Com "echo"     ["<fn=2>\xf242</fn>"] "baticon" 3600
                    , Run Battery        [ "--template" , "<acstatus><watts> (<left>%)"
                                         , "--Low"      , "10"        -- units: %
                                         , "--High"     , "80"        -- units: %
                                         , "--low"      , "#ea6c73"
                                         , "--normal"   , "#f9af4f"
                                         , "--high"     , "#91b362"

                                         , "--" -- battery specific options
                                                   -- discharging status
                                                   , "-o"	, "<left>% (<timeleft>)"
                                                   -- AC "on" status
                                                   , "-O"	, "<fc=#91b362>Charging</fc>"
                                                   -- charged status
                                                   , "-i"	, "<fc=#bfbdb6>Charged</fc>"
                                         ] 50
                    
                     -- Time and date
                    , Run Date "<fn=2>\xf017</fn>  %b %d %Y - %H:%M " "date" 10

                      -- Prints out the left side items such as workspaces, layout, etc.
                    , Run UnsafeStdinReader
                    ]

       -- layout
       , sepChar = "%"
       , alignSep = "}{"
       , template = " %UnsafeStdinReader% |  \
       \<box type=Bottom width=2 mb=2>%baticon%  %battery%</box>   \
       \<box type=Bottom width=2 mb=2>%dynnetwork%</box> }{ \
       \<box type=Bottom width=2 mb=2><fc=#bfbdb6><action=`alacritty -e nvtop`>%gpuicon%  %gpuusage%</action></fc></box>   \
       \<box type=Bottom width=2 mb=2><fc=#bfbdb6><action=`alacritty -e glances`>%multicpu%</action></fc></box>   \
       \<box type=Bottom width=2 mb=2>%coretemp%</box>   \
       \<box type=Bottom width=2 mb=2><fc=#bfbdb6><action=`alacritty -e htop`>%memory%</action></fc></box>   \
       \<box type=Bottom width=2 mb=2>%disku%</box>   \
       \<box type=Bottom width=2 mb=2>%volume_icon%  %volume%</box>   \
       \<box type=Bottom width=2 mb=2>%date%</box> "
       }
